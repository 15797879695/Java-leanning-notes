# 网络编程

1. BIO ，AIO，NIO 特点，有什么区别

   - BIO：线程发起 IO 请求，不管内核是否准备好 IO 操作，从发起请求起，线程一直阻塞，直到操作完成。
   - NIO：线程发起 IO 请求，立即返回；内核在做好 IO 操作的准备之后，通过调用注册的回调函数通知线程做 IO 操作，线程开始阻塞，直到操作完成。
   - AIO：线程发起 IO 请求，立即返回；内存做好 IO 操作的准备之后，做 IO 操作，直到操作完成或者失败，通过调用注册的回调函数通知线程做 IO 操作完成或者失败。

    

   - BIO 是一个连接一个线程。
   - NIO 是一个请求一个线程。
   - AIO 是一个有效请求一个线程。

    

   - BIO：同步并阻塞，服务器实现模式为一个连接一个线程，即客户端有连接请求时服务器端就需要启动一个线程进行处理，如果这个连接不做任何事情会造成不必要的线程开销，当然可以通过线程池机制改善。
   - NIO：同步非阻塞，服务器实现模式为一个请求一个线程，即客户端发送的连接请求都会注册到多路复用器上，多路复用器轮询到连接有I/O请求时才启动一个线程进行处理。
   - AIO：异步非阻塞，服务器实现模式为一个有效请求一个线程，客户端的 IO 请求都是由 OS 先完成了再通知服务器应用去启动线程进行处理。

    

   ### **适用场景分析**

   - BIO 方式适用于连接数目比较小且固定的架构，这种方式对服务器资源要求比较高，并发局限于应用中，JDK1.4 以前的唯一选择，但程序直观简单易理解。
   - NIO 方式适用于连接数目多且连接比较短（轻操作）的架构，比如聊天服务器，并发局限于应用中，编程比较复杂，JDK1.4 开始支持。
   - AIO 方式使用于连接数目多且连接比较长（重操作）的架构，比如相册服务器，充分调用OS参与并发操作，编程比较复杂，JDK7开始支持。

    

   **举个例子**

   - 同步阻塞：你到饭馆点餐，然后在那等着，啥都干不了，餐没做好，你就必须等着！ BIO 
   - 同步非阻塞：你在饭馆点完餐，就去玩儿了。不过玩一会儿，就回饭馆问一声：好了没？  NIO
   - 异步非阻塞：饭馆打电话说，我们知道您的位置，一会给你送过来，安心玩儿就可以了，类似于外卖。 AIO

   

2. 网络osi 模型

   ![](C:\Users\LYM\Desktop\知识总结\网络模型.png)

3. 缓存流优缺点

   - 不带缓冲的流读取到一个字节或字符，就直接写出数据
   - 带缓冲的流读取到一个字节或字符，先不输出，等达到了缓冲区的最大容量再一次性写出去

    

   优点：减少了写出次数，提高了效率

   缺点：接收端可能无法及时获取到数据

4. 基于TCP和UDP的Socket编程的主要步骤

   - JDK 在 java.net 包中为 TCP 和 UDP 两种通信协议提供了相应的 Socket 编程类
   - TCP 协议，服务端对应 ServerSocket，客户端对应 Socket
   - UDP 协议对应 DatagramSocket
   - 基于 TCP 协议创建的套接字可以叫做流套接字，服务器端相当于一个监听器，用来监听端口，服务器与客服端之间的通讯都是输入输出流来实现的
   - 基于 UDP 协议的套接字就是数据报套接字，客户端和服务端都要先构造好相应的数据包

    

   **基于 TCP 协议的 Socket 编程的主要步骤**

   服务端：

   - 指定本地的端口创建 ServerSocket 实例， 用来监听指定端口的连接请求
   - 通过 accept() 方法返回的 Socket 实例，建立了一个和客户端的新连接
   - 通过 Sockect 实例获取 InputStream 和 OutputStream 读写数据
   - 数据传输结束，调用 socket 实例的 close() 方法关闭连接

   客户端：

   - 指定的远程服务器 IP 地址和端口创建 Socket 实例
   - 通过 Socket 实例获取 InputStream 和 OutputStream 来进行数据的读写
   - 数据传输结束，调用 socket 实例的 close() 方法关闭连接

    

   **基于 UDP 协议的 Socket 编程的主要步骤**

   服务端：

   - 指定本地端口创建 DatagramSocket 实例
   - 通过字节数组，创建 DatagramPacket 实例，调用 DatagramSocket 实例的 receive() 方法，用 DatagramPacket 实例来接收数据
   - 设置 DatagramPacket 实例返回的数据，调用 DatagramSocket 实例的 send() 方法来发送数据
   - 数据传输完成，调用 DatagramSocket 实例的 close() 方法

   客户端：

   - 创建 DatagramSocket 实例
   - 通过 IP 地址端口和数据创建 DatagramSocket 实例，调用 DatagramSocket 实例 send() 方法发送数据包
   - 通过字节数组创建 DatagramSocket 实例，调用 DatagramSocket 实例 receive() 方法接受数据包
   - 数据传输完成，调用 DatagramSocket 实例的 close() 方法

    